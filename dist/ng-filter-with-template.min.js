(function(){var config,moreOptionsShowFilters,openFilters,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};config={path:""},openFilters={},moreOptionsShowFilters={},angular.module("ngFilter",["ui.bootstrap.accordion"]).factory("Filter",function($translate){var Filter;return Filter=function(){function Filter(filter){this.clearSelection=__bind(this.clearSelection,this),this.getSelectedItems=__bind(this.getSelectedItems,this),this.setSelectedItems=__bind(this.setSelectedItems,this);var item,k,v,_i,_len,_ref,_this=this;for(k in filter)v=filter[k],this[k]=v;if(this.selectedCount=0,"date"===this.type)this.date={},this.setDates=function(offset){var date;return date={from:moment().add("d",offset).startOf("day").toDate(),to:moment().endOf("day").toDate()},_this.date=date},this.dateRangeLabel=function(){return _this.date.from&&_this.date.to?moment(_this.date.from).startOf("day").isSame(moment().startOf("day"))?$translate("listing.dates.today"):moment(_this.date.to).startOf("day").isSame(moment().startOf("day"))?""+moment(_this.date.from).add("hours",moment().hours()).fromNow()+" "+$translate("listing.dates.untilToday"):""+moment(_this.date.from).add("hours",moment().hours()).fromNow()+" "+$translate("listing.dates.until")+" "+moment(_this.date.to).add("hours",moment().hours()).fromNow():$translate("listing.dates.noRangeSelected")};else for(_ref=this.items,_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],item.selected&&this.selectedCount++;this.selectedCountLabel=this.selectedCount?"("+this.selectedCount+")":""}return Filter.prototype.setSelectedItems=function(itemsAsSearchParameter){var date,item,items,_i,_len,_ref,_ref1;if("date"===this.type)this.selectedCount=1,items=itemsAsSearchParameter.replace(this.name+":[","").replace("]","").split(" TO "),date={from:new Date(items[0]),to:new Date(items[1])},this.date=date;else for(this.selectedCount=0,_ref=this.items,_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],_ref1=item.url,__indexOf.call(itemsAsSearchParameter.split(","),_ref1)>=0&&(item.selected=!0,this.selectedCount++);return this.selectedCountLabel="("+this.selectedCount+")"},Filter.prototype.getSelectedItems=function(){var item,_i,_len,_ref,_results;if("date"===this.type)return this.date.from&&this.date.to?[this.name+(":["+moment(this.date.from).startOf("day").toISOString()+" TO "+moment(this.date.to).endOf("day").toISOString()+"]")]:[];for(_ref=this.items,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],item.selected&&_results.push(item.url);return _results},Filter.prototype.clearSelection=function(){var item,_i,_len,_ref,_results;if(this.selectedCount=0,this.selectedCountLabel="","date"===this.type)return this.date={};for(_ref=this.items,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],_results.push(item.selected=!1);return _results},Filter}()}).directive("filter",function(){return{restrict:"E",scope:{filters:"=filters"},templateUrl:config.path?config.path+"/ng-filter.html":"ng-filter.html",link:function($scope){var filter,_i,_len,_ref;for(_ref=$scope.filters,_i=0,_len=_ref.length;_len>_i;_i++)filter=_ref[_i],openFilters.hasOwnProperty(filter.rangeUrlTemplate)||(openFilters[filter.rangeUrlTemplate]=!1),moreOptionsShowFilters.hasOwnProperty(filter.rangeUrlTemplate)||(moreOptionsShowFilters[filter.rangeUrlTemplate]=!1);return $scope.openFilters=openFilters,$scope.moreOptionsShowFilters=moreOptionsShowFilters,$scope.clearAll=function(){var _j,_len1,_ref1,_results;for(_ref1=$scope.filters,_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)filter=_ref1[_j],_results.push(filter.clearSelection());return _results}}}}).provider("vtexNgFilter",{config:config,$get:function(filter){return filter}})}).call(this),angular.module("ngFilter").run(function($templateCache){$templateCache.put("ng-filter.html",'<div class="filters-block">\n\n    <accordion close-others="false" template-url="window.versionDirectory + \'lib/angular-ui/accordion.html\'">\n        <accordion-group is-open="openFilters[filter.rangeUrlTemplate]" heading="{{ \'filters.\' + filter.rangeUrlTemplate | translate }} {{ filter.selectedCountLabel }}" ng-repeat="filter in filters">\n\n            <div ng-switch="" on="filter.type">\n                <div ng-switch-when="date">\n                    <div class="input-append">\n                        <input type="text" ng-click="openFilters[filter.rangeUrlTemplate + \'Selector\'] = !openFilters[filter.rangeUrlTemplate + \'Selector\']" value="{{filter.dateRangeLabel()}}" readonly="readonly">\n\n                        <a href="javascript:void(0);" class="add-on" ng-click="openFilters[filter.rangeUrlTemplate + \'Selector\'] = !openFilters[filter.rangeUrlTemplate + \'Selector\']"><i class="icon-calendar"></i></a>\n                    </div>\n                    <div class="date-selectors" ng-show="openFilters[filter.rangeUrlTemplate + \'Selector\']">\n                        <div class="controls">\n                            <p translate="">listing.dates.from</p>\n                            <div class="well well-small pull-left" ng-model="filter.date.from">\n                                <datepicker show-weeks="false"></datepicker>\n                            </div>\n                        </div>\n\n                        <div class="controls">\n                            <p translate="">listing.dates.to</p>\n                            <div class="well well-small pull-left" ng-model="filter.date.to">\n                                <datepicker show-weeks="false"></datepicker>\n                            </div>\n                        </div>\n                    </div>\n                    <p>\n                        <a href="javascript: void(0)" ng-click="filter.setDates(0)" translate="">listing.dates.today</a>\n                    </p>\n                    <p>\n                        <a href="javascript: void(0)" ng-click="filter.setDates(-1)" translate="">listing.dates.yesterday</a>\n                    </p>\n                    <p>\n                        <a href="javascript: void(0)" ng-click="filter.setDates(-7)" translate="">listing.dates.thisWeek</a>\n                    </p>\n                    <p>\n                        <a href="javascript: void(0)" ng-click="filter.setDates(-30)" translate="">listing.dates.thisMonth</a>\n                    </p>\n                    <p>\n                        <a href="javascript: void(0)" ng-click="filter.clearSelection()" translate="">listing.dates.clearFilter</a>\n                    </p>\n\n                </div>\n                <div ng-switch-default="">\n                    <ul class="filter-list nav nav-pills nav-stacked">\n                        <li ng-repeat="item in filter.items" ng-show="$index < 5 || moreOptionsShowFilters[filter.rangeUrlTemplate]">\n                            <label class="checkbox inline">\n                                <input type="checkbox" ng-model="item.selected">\n                                <span class="">{{ item.name }} ({{ item.quantity }})</span>\n                            </label>\n                        </li>\n                    </ul>\n                    <a href="javascript:void(0)" ng-click="moreOptionsShowFilters[filter.rangeUrlTemplate] = true" ng-show="filter.items.length > 5 && !moreOptionsShowFilters[filter.rangeUrlTemplate]" class="muted">{{ \'filters.moreOptionsShow\' | translate}} ({{ filter.items.length }})</a>\n                    <a href="javascript:void(0)" ng-click="moreOptionsShowFilters[filter.rangeUrlTemplate] = false" ng-show="filter.items.length > 5 && moreOptionsShowFilters[filter.rangeUrlTemplate]" class="muted">{{ \'filters.moreOptionsHide\' | translate}}</a>\n                </div>\n            </div>\n        </accordion-group>\n    </accordion>\n\n    <button translate="" class="btn pull-right" ng-click="clearAll()">listing.clearAll</button>\n\n</div>')});